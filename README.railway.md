# üöÄ –î–µ–ø–ª–æ–π –ú–∞–Ω–≥–∞–ª –°–∏–ª—ã –Ω–∞ Railway

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏:

### 1. **Middleware –∫–æ–Ω—Ñ–ª–∏–∫—Ç**
- ‚ùå –£–¥–∞–ª–µ–Ω –ø—Ä–æ–±–ª–µ–º–Ω—ã–π middleware.ts
- ‚úÖ Security headers –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ next.config.ts
- ‚úÖ –£–±—Ä–∞–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å edge runtime

### 2. **Standalone vs npm start**
- ‚ùå –£–±—Ä–∞–Ω `output: 'standalone'` –∏–∑ next.config.ts  
- ‚úÖ –¢–µ–ø–µ—Ä—å `npm start` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Railway —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API**
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ BigInt –¥–ª—è JSON
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –ø—É—Å—Ç—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ –≤–º–µ—Å—Ç–æ –æ—à–∏–±–æ–∫ 500
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### 4. **–ó–∞—â–∏—Ç–∞ –æ—Ç null/undefined**
- ‚úÖ Safe parsing JSON –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Array.isArray() –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ Fallback –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ Null checks –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Railway:

```env
DATABASE_URL=postgresql://username:password@host:port/database
NODE_ENV=production
NEXTAUTH_URL=https://your-app.railway.app
NEXTAUTH_SECRET=your-secret-key
```

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è:

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å Railway CLI:**
   ```bash
   npm i -g @railway/cli
   railway login
   ```

2. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç:**
   ```bash
   railway init
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   railway variables set DATABASE_URL="your-postgres-url"
   railway variables set NODE_ENV="production"
   ```

4. **–î–µ–ø–ª–æ–π:**
   ```bash
   railway up
   ```

## üì¶ –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

- ‚úÖ `next.config.ts` - –±–µ–∑ standalone, —Å security headers
- ‚úÖ `railway.json` - –±–µ–∑ healthcheck
- ‚úÖ `railway.toml` - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `global-error.tsx` - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ `not-found.tsx` - 404 —Å—Ç—Ä–∞–Ω–∏—Ü–∞

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –°–æ–∑–¥–∞—Å—Ç PostgreSQL –ë–î
2. –í—ã–ø–æ–ª–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ Prisma  
3. –ó–∞–ø–æ–ª–Ω–∏—Ç –ë–î –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## üîç –ö–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
rm -rf .next

# –°–±–æ—Ä–∫–∞
npm run build

# –ó–∞–ø—É—Å–∫ production
npm start
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- ‚úÖ Security headers –≤ next.config.ts
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è API
- ‚úÖ X-Frame-Options: DENY
- ‚úÖ Content-Type validation

**–í—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã! Middleware —É–±—Ä–∞–Ω, standalone –æ—Ç–∫–ª—é—á–µ–Ω.** üî• 